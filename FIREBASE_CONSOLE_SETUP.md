# ðŸ”¥ Firebase Console Configuration Checklist

## Your Firebase Project Details

- **Project ID**: `smartstyle-c8276`
- **Auth Domain**: `smartstyle-c8276.firebaseapp.com`
- **Console URL**: https://console.firebase.google.com/project/smartstyle-c8276

---

## âœ… Step-by-Step Configuration

### 1. Enable Google Authentication

1. Go to: https://console.firebase.google.com/project/smartstyle-c8276/authentication/providers

2. Click on **"Sign-in method"** tab (should already be selected)

3. Find **"Google"** in the list of providers

4. Click on **Google** provider

5. Toggle the **"Enable"** switch to ON

6. Set your **Project support email** (use your email address)

7. Click **"Save"**

âœ… **Google Sign-In is now configured!**

---

### 2. Enable Apple Authentication (Optional)

> **Note**: Apple Sign-In requires an Apple Developer account ($99/year). Skip this section if you don't have one or want to test Google Sign-In first.

#### Step 2.1: Firebase Console Configuration

1. Go to: https://console.firebase.google.com/project/smartstyle-c8276/authentication/providers

2. Find **"Apple"** in the list of providers

3. Click on **Apple** provider

4. Toggle the **"Enable"** switch to ON

5. **IMPORTANT**: Copy the following values (you'll need them for Apple Developer Console):
   - **Service ID**: (This will be generated by Apple - e.g., `com.smartstyle.web`)
   - **OAuth code redirect URL**: Copy this URL exactly (looks like: `https://smartstyle-c8276.firebaseapp.com/__/auth/handler`)

6. **DON'T CLICK SAVE YET** - we need to configure Apple Developer Console first

#### Step 2.2: Apple Developer Console Configuration

1. Go to: https://developer.apple.com/account

2. Sign in with your Apple Developer account

3. Navigate to: **Certificates, Identifiers & Profiles** â†’ **Identifiers**

4. **Create an App ID** (if you don't have one):
   - Click the **"+"** button
   - Select **"App IDs"** â†’ Click **"Continue"**
   - Enter:
     - **Description**: SmartStyle App
     - **Bundle ID**: `com.smartstyle.app` (or your preferred ID)
   - Under **Capabilities**, check **"Sign In with Apple"**
   - Click **"Continue"** â†’ **"Register"**

5. **Create a Service ID** (for web authentication):
   - Click **Identifiers** â†’ **"+"** button
   - Select **"Services IDs"** â†’ Click **"Continue"**
   - Enter:
     - **Description**: SmartStyle Web Auth
     - **Identifier**: `com.smartstyle.web` (this is your Service ID)
   - Click **"Continue"** â†’ **"Register"**

6. **Configure the Service ID**:
   - Click on the Service ID you just created
   - Check **"Sign In with Apple"**
   - Click **"Configure"** button next to it
   - **Primary App ID**: Select the App ID from step 4
   - Click **"+"** to add a Web Domain:
     - **Domains and Subdomains**: `smartstyle-c8276.firebaseapp.com`
     - **Return URLs**: Paste the OAuth redirect URL from Firebase (from step 2.1.5)
   - Click **"Next"** â†’ **"Done"** â†’ **"Continue"** â†’ **"Save"**

7. **Create a Key**:
   - Go to **Keys** â†’ Click **"+"** button
   - Enter:
     - **Key Name**: SmartStyle Apple Sign-In Key
   - Check **"Sign In with Apple"**
   - Click **"Configure"** next to it
   - Select your **Primary App ID** from step 4
   - Click **"Save"** â†’ **"Continue"** â†’ **"Register"**
   - **DOWNLOAD THE KEY FILE** (.p8) - **You can only download this ONCE!**
   - **Note the Key ID** shown on the screen (e.g., `ABC123DEFG`)

8. **Get your Team ID**:
   - Go to: https://developer.apple.com/account
   - Your Team ID is shown in the top right (e.g., `XYZ987HIJK`)

#### Step 2.3: Complete Firebase Apple Configuration

1. Go back to Firebase Console (Apple provider settings)

2. Enter the following:
   - **Service ID**: `com.smartstyle.web` (from step 2.2.5)
   - **Apple Team ID**: Your Team ID from step 2.2.8
   - **Key ID**: The Key ID from step 2.2.7
   - **Private Key**: Upload the .p8 key file you downloaded in step 2.2.7

3. Click **"Save"**

âœ… **Apple Sign-In is now configured!**

---

### 3. Add Authorized Domains (Important for Production)

1. Go to: https://console.firebase.google.com/project/smartstyle-c8276/authentication/settings

2. Scroll to **"Authorized domains"** section

3. By default, these should already be added:
   - `localhost` (for local development)
   - `smartstyle-c8276.firebaseapp.com` (Firebase hosting)

4. **When deploying to production**, add your custom domain:
   - Click **"Add domain"**
   - Enter your domain (e.g., `smartstyle.com`, `www.smartstyle.com`)
   - Click **"Add"**

---

### 4. Configure Firestore Security Rules (Recommended)

1. Go to: https://console.firebase.google.com/project/smartstyle-c8276/firestore/rules

2. Replace the rules with:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users can only read/write their own data
    match /users/{userId}/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Wardrobe items - users can only access their own
    match /wardrobeItems/{itemId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
    
    // Recommendations - users can only access their own
    match /users/{userId}/recommendations/{recId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

3. Click **"Publish"**

---

### 5. Configure Storage Security Rules (Recommended)

1. Go to: https://console.firebase.google.com/project/smartstyle-c8276/storage/rules

2. Replace the rules with:

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Wardrobe items - users can only access their own files
    match /wardrobeItems/{userId}/{allPaths=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Allow read access to public files
    match /public/{allPaths=**} {
      allow read: if true;
    }
  }
}
```

3. Click **"Publish"**

---

## ðŸ§ª Testing Authentication

### Local Testing (http://localhost:3000)

1. Open your browser to: http://localhost:3000

2. You should see the SmartStyle app with sign-in buttons in the header

3. Click **"Sign in with Google"**:
   - A popup should open
   - Select your Google account
   - Grant permissions
   - Popup closes and you should see your profile in the header

4. Click **"Sign Out"** to test logout:
   - Should show success toast
   - Sign-in buttons should reappear

5. **(Optional)** Click **"Sign in with Apple"**:
   - **Note**: Apple Sign-In may not work on `localhost` in some browsers
   - Try using `http://127.0.0.1:3000` instead
   - Or deploy to a test domain with HTTPS

### Common Issues

#### "Popup was blocked by browser"
- **Solution**: Allow popups for localhost in browser settings
- Or check if popup blocker extension is active

#### "This domain is not authorized"
- **Solution**: Make sure `localhost` is in the authorized domains list (step 3)

#### Apple Sign-In doesn't work on localhost
- **Solution**: Use `http://127.0.0.1:3000` or deploy to HTTPS domain
- Apple requires secure contexts for authentication

#### "Failed to sign in with Google"
- **Solution**: 
  1. Check that Google provider is enabled in Firebase Console
  2. Clear browser cache and cookies
  3. Try incognito/private browsing mode
  4. Check browser console for detailed error messages

---

## âœ… Configuration Checklist

Use this checklist to track your progress:

- [ ] Opened Firebase Console for project `smartstyle-c8276`
- [ ] Enabled Google Sign-In provider
- [ ] Set support email for Google Sign-In
- [ ] Saved Google provider configuration
- [ ] (Optional) Created Apple App ID in Apple Developer Console
- [ ] (Optional) Created Apple Service ID in Apple Developer Console
- [ ] (Optional) Configured Service ID with return URLs
- [ ] (Optional) Created Apple Sign-In Key and downloaded .p8 file
- [ ] (Optional) Enabled Apple Sign-In in Firebase Console
- [ ] (Optional) Uploaded Apple key and entered Team ID
- [ ] Verified authorized domains include `localhost`
- [ ] Published Firestore security rules
- [ ] Published Storage security rules
- [ ] Tested Google Sign-In locally
- [ ] (Optional) Tested Apple Sign-In
- [ ] Tested Sign-Out functionality

---

## ðŸš€ You're All Set!

Once you've completed the checklist above, your authentication is fully configured!

**What you can do now:**
- Users can sign in with Google (and Apple if configured)
- User profiles are displayed in the header
- Auth state persists across page refreshes
- All existing features (wardrobe, style advisor, etc.) now work with authenticated users

**Next steps:**
- Add protection to routes that require authentication
- Customize the sign-in UI if needed
- Add user profile management features
- Deploy to production with your custom domain

---

## ðŸ“š Quick Links

- **Firebase Console**: https://console.firebase.google.com/project/smartstyle-c8276
- **Authentication**: https://console.firebase.google.com/project/smartstyle-c8276/authentication
- **Firestore**: https://console.firebase.google.com/project/smartstyle-c8276/firestore
- **Storage**: https://console.firebase.google.com/project/smartstyle-c8276/storage
- **Apple Developer**: https://developer.apple.com/account
- **Documentation**: See `AUTHENTICATION_SETUP.md` for detailed guides

---

**Need help?** Check the troubleshooting section above or the detailed setup guide in `AUTHENTICATION_SETUP.md`.
